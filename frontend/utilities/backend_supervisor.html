

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Supervisor Control Panel</title>
  <style>
    body  { font-family:sans-serif; margin:2rem; background:#f7f7f7; }
    h1    { margin-bottom:1rem; }
    #processes { display:flex; flex-direction:column; gap:0.75rem; }
    .proc { background:#fff; border:1px solid #ccc; padding:0.75rem; display:flex; align-items:center; }
    .name { flex:1 1 auto; font-weight:bold; }
    button{ margin-left:0.5rem; }
  </style>
</head>
<body>
  <h1>Supervisor Control Panel</h1>
  <div id="processes"></div>

  <script>
    async function fetchStatus() {
      const res  = await fetch('/supervisor/status');
      const procs = await res.json();
      const container = document.getElementById('processes');
      container.innerHTML = '';

      procs.forEach(p => {
        const row = document.createElement('div');
        row.className = 'proc';
        row.innerHTML = `
          <span class="name">${p.name}</span>
          <span>${p.statename}</span>
          <button onclick="send('start','${p.name}')">Start</button>
          <button onclick="send('stop','${p.name}')">Stop</button>
          <button onclick="send('restart','${p.name}')">Restart</button>
        `;
        container.appendChild(row);
      });
    }

    async function send(action,name){
      await fetch(`/supervisor/${action}/${name}`,{method:'POST'});
      fetchStatus();
    }

    // refresh every 5â€¯s
    fetchStatus();
    setInterval(fetchStatus,5000);
  </script>
</body>
</html>